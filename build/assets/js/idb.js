"use strict";

function database() {
  var dbPromise;

  if (!'indexedDB' in window) {
    console.log('browser does not support indexdb');
    dbPromise = new Promise(function (resolve, reject) {
      reject();
    });
  } else {
    dbPromise = idb.open('converter-db', 1, function (upgradeDb) {
      if (!upgradeDb.objectStoreNames.contains('rates')) {
        var ratesStore = upgradeDb.createObjectStore('rates', {
          keyPath: 'query'
        });
        ratesStore.createIndex('timestamp', 'timestamp');
      }
    });
  }

  return dbPromise;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlkYi5qcyJdLCJuYW1lcyI6WyJkYXRhYmFzZSIsImRiUHJvbWlzZSIsIndpbmRvdyIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImlkYiIsIm9wZW4iLCJ1cGdyYWRlRGIiLCJvYmplY3RTdG9yZU5hbWVzIiwiY29udGFpbnMiLCJyYXRlc1N0b3JlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiY3JlYXRlSW5kZXgiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsUUFBVCxHQUFtQjtBQUNmLE1BQUlDLFNBQUo7O0FBQ0EsTUFBRyxDQUFDLFdBQUQsSUFBZ0JDLE1BQW5CLEVBQTJCO0FBQ3ZCQyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxrQ0FBWjtBQUNBSCxJQUFBQSxTQUFTLEdBQUcsSUFBSUksT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFtQjtBQUN2Q0EsTUFBQUEsTUFBTTtBQUNULEtBRlcsQ0FBWjtBQUdILEdBTEQsTUFLTztBQUNITixJQUFBQSxTQUFTLEdBQUdPLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLGNBQVQsRUFBeUIsQ0FBekIsRUFBNEIsVUFBQUMsU0FBUyxFQUFFO0FBQy9DLFVBQUcsQ0FBQ0EsU0FBUyxDQUFDQyxnQkFBVixDQUEyQkMsUUFBM0IsQ0FBb0MsT0FBcEMsQ0FBSixFQUFpRDtBQUM3QyxZQUFJQyxVQUFVLEdBQUdILFNBQVMsQ0FBQ0ksaUJBQVYsQ0FBNEIsT0FBNUIsRUFBcUM7QUFBQ0MsVUFBQUEsT0FBTyxFQUFFO0FBQVYsU0FBckMsQ0FBakI7QUFDQUYsUUFBQUEsVUFBVSxDQUFDRyxXQUFYLENBQXVCLFdBQXZCLEVBQW9DLFdBQXBDO0FBQ0g7QUFDSixLQUxXLENBQVo7QUFNSDs7QUFDRCxTQUFPZixTQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkYXRhYmFzZSgpe1xyXG4gICAgbGV0IGRiUHJvbWlzZTtcclxuICAgIGlmKCEnaW5kZXhlZERCJyBpbiB3aW5kb3cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGluZGV4ZGInKTtcclxuICAgICAgICBkYlByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xyXG4gICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gaWRiLm9wZW4oJ2NvbnZlcnRlci1kYicsIDEsIHVwZ3JhZGVEYj0+e1xyXG4gICAgICAgICAgICBpZighdXBncmFkZURiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJ3JhdGVzJykpe1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhdGVzU3RvcmUgPSB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoJ3JhdGVzJywge2tleVBhdGg6ICdxdWVyeSd9KTtcclxuICAgICAgICAgICAgICAgIHJhdGVzU3RvcmUuY3JlYXRlSW5kZXgoJ3RpbWVzdGFtcCcsICd0aW1lc3RhbXAnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlOyAgXHJcbn1cclxuIl0sImZpbGUiOiJpZGIuanMifQ==
